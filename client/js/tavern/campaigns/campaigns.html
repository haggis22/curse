<div ng-controller="campaignsController" class="campaigns">

    <style type="text/css">
    
        .campaigns fieldset
        {
            margin-top: 15px; 
            width: 300px; 
            padding: 15px 10px;
        }
        
        #campaign-table .name
        {
            text-align: left;
            width: 100px;
        }

        #campaign-table .characters
        {
            text-align: left;
            width: 100px;
        }

        #campaign-table .updated
        {
            text-align: left;
            width: 120px;
            font-size: 12px;
            display: none;
        }

        #campaign-table .delete
        {
            text-align: center;
            width: 30px;
        }
        
    </style>

    <div class="modules">
        <div ng-show="modules.length == 0">There are no available modules.</div>

        <div ng-show="modules.length > 0">
            <fieldset class="tavern modules" style="margin-top: 15px; width: 300px; padding: 15px 10px;">
                <legend>Modules</legend>

                <table class="datatable">
                    <thead>
                        <tr>
                            <th align="left">Name</th>
                            <th align="left">Create Campaign</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="module in modules | orderBy:'name'">
                            <td>{{ module.name }}</td>
                            <td><button ng-click="startCampaign(module)">Start</button></td>
                        </tr>
                    </tbody>
                </table>
            </fieldset>
        </div>
    </div>

    <div class="campaigns">
        <div ng-show="campaigns.length == 0">You have no saved campaigns.</div>

        <div ng-show="campaigns.length > 0">
            <fieldset class="tavern">
                <legend>Campaigns</legend>

                <table id="campaign-table" class="datatable">
                    <thead>
                        <tr>
                            <th class="name">Name</th>
                            <th class="characters">Characters</th>
                            <th class="updated">Updated</th>
                            <th class="delete">Delete</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr ng-repeat="campaign in campaigns | orderBy:'name'">
                            <td class="name">
                                <a ui-sref="tavern.campaign({ campaignID: campaign._id })">{{ campaign.name }}</a>
                            </td>
                            <td class="characters">
                                {{ campaign.characters.length | number:0 }} character<span ng-hide="campaign.characters.length === 1">s</span>
                            </td>
                            <td class="updated">{{ campaign.updated | date:'yyyy-MM-dd HH:mm:ss' }}</td>
                            <td class="delete"><img src="/images/delete.png" class="icon-link" title="Delete campaign" ng-click="deleteCampaign(campaign)" /></td>
                        </tr>
                    </tbody>
                </table>
            </fieldset>
        </div>
    </div>

    <div ui-view style="margin-top: 15px;"></div>

</div>
