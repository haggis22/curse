<div ng-controller="combatController">

	<div>
		<div ng-repeat="monster in mapService.currentRoom.monsters" ng-show="monster.isAlive()" class="window window-monster" style="margin-bottom: 10px;">
			<div ng-show="monster.image" class="image" style="float: left; height: 80px; margin-right: 20px;"><img ng-src="images/{{ monster.image }}" style="width: 80px; height: 80px;" /></div>
			<div style="float: left;">
				<div class="name" ng-class="{ 'attackable' : mode == 'target' }" ng-click="selectTarget(monster)">{{ monster.getName(false) | capFirst }}</div>
				<div class="attributes">
					<div><span class="attr-label">Strength:</span><span class="attr-value">{{ monster.str }}</span></div>
					<div><span class="attr-label">Dexterity:</span><span class="attr-value">{{ monster.dex }}</span></div>
					<div><span class="attr-label">Health:</span><span class="attr-value">{{ monster.isAlive() ? monster.health : 'DEAD' }}</span></div>

                    <div ng-show="monster.skills.length > 0" style="margin-top: 15px;">
                        <div class="header">Skills</div>
					    <div ng-repeat="skill in monster.skills">
                            <span class="attr-label">{{ skill.getName() | capFirst }}:</span>
                            <span class="attr-value">{{ skill.getLevel() | number: 0 }}</span>
                        </div>
                    </div>

				</div>
			</div>
			<div style="clear: both;">&nbsp;</div>
            <div style="margin-top: 10px;" ng-show="monster.hasAnything()">
                Carrying
                <ul>
                    <li ng-repeat="item in monster.pack">{{ item.getName(false) }}<span ng-show="item.isEquipped"> (*)</span></li>
                </ul>
            </div>
		</div>
	</div>

	<div>
		<button type="button" ng-click="chooseAction()">Attack</button>
		<button type="button" ng-click="castSpell()">Cast spell</button>
	</div>
    <div style="margin-top: 10px;">
		<button type="button" ng-click="retreat()">Run Away!</button>
		<button type="button" ng-click="fightRound()">Fight Round</button>
    </div>	

	<div>
		<ul>
			<li ng-repeat="action in combatActions">{{ action.getDescription() | capFirst }}</li>
		</ul>
	</div>
	

</div>
